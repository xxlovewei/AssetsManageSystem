<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="百度地图,百度地图API，百度地图自定义工具，百度地图所见即所得工具" />
<meta name="description" content="百度地图API自定义地图，帮助用户在可视化操作下生成百度地图" />
<title>百度地图API自定义地图</title>
<!--引用百度地图API-->
<script type="text/javascript" src="./js/jquery.js"></script>
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=I1iruTOiEMidZAWfs9QEzUbuKHLmeWAO	"></script>

</head>

<body>
	<!--百度地图容器-->
	<div
		style="width: 700px; height: 550px; border: #ccc solid 1px; font-size: 12px"
		id="map"></div>
	<p>
		<button id="a">位置A</button>
		<button id="d">导航</button>

	</p>
	<p>
		<button id="b">位置b</button>
		<button id="d">导航</button>
	</p>

</body>
<script type="text/javascript">
	function mapchange(v) {
		var markers;
		if (v == "a") {
			markers = [ {
				content : "地图",
				title : "雅戈尔",
				imageOffset : {
					width : 0,
					height : 3
				},
				position : {
					lat : 29.824442,
					lng : 121.520215
				}
			} ];
		} else {
			markers = [ {
				content : "鄞州公园",
				title : "美丽的鄞州公园",
				imageOffset : {
					width : 0,
					height : 3
				},
				position : {
					lat : 29.81736,
					lng : 121.552447,
				}
			} ];

		}

		createMap(markers[0].position.lat, markers[0].position.lng);//创建地图
		setMapEvent();//设置地图事件
		addMapControl();//向地图添加控件
		addMapOverlay(markers);//向地图添加覆盖物

	}

	$("#d").click(function() {
		window.open("/dt/wx/loc.html", "_blank");
	});

	$("#a").click(function() {

		mapchange("a")

	});
	$("#b").click(function() {
		mapchange("b")
	});

	//创建和初始化地图函数：
	function initMap() {
		createMap();//创建地图
		setMapEvent();//设置地图事件
		addMapControl();//向地图添加控件
		addMapOverlay();//向地图添加覆盖物
	}
	function createMap(lat, lng) {
		map = new BMap.Map("map");
		map.centerAndZoom(new BMap.Point(lng, lat), 16);
	}
	function setMapEvent() {
		map.enableScrollWheelZoom();
		map.enableKeyboard();
		map.enableDragging();
		map.enableDoubleClickZoom()
	}
	function addClickHandler(target, window) {
		target.addEventListener("click", function() {
			target.openInfoWindow(window);
		});
	}
	function addMapOverlay(markers) {

		for (var index = 0; index < markers.length; index++) {
			var point = new BMap.Point(markers[index].position.lng,
					markers[index].position.lat);
			var marker = new BMap.Marker(
					point,
					{
						icon : new BMap.Icon(
								"http://api.map.baidu.com/lbsapi/createmap/images/icon.png",
								new BMap.Size(20, 25), {
									imageOffset : new BMap.Size(
											markers[index].imageOffset.width,
											markers[index].imageOffset.height)
								})
					});
			var label = new BMap.Label(markers[index].title, {
				offset : new BMap.Size(25, 5)
			});
			var opts = {
				width : 200,
				title : markers[index].title,
				enableMessage : false
			};
			var infoWindow = new BMap.InfoWindow(markers[index].content, opts);
			marker.setLabel(label);
			addClickHandler(marker, infoWindow);
			map.addOverlay(marker);
		}
		;
	}
	//向地图添加控件
	function addMapControl() {
		var scaleControl = new BMap.ScaleControl({
			anchor : BMAP_ANCHOR_TOP_LEFT
		});
		scaleControl.setUnit(BMAP_UNIT_METRIC);
		map.addControl(scaleControl);
		var navControl = new BMap.NavigationControl({
			anchor : BMAP_ANCHOR_TOP_LEFT,
			type : 1
		});
		map.addControl(navControl);
		var overviewControl = new BMap.OverviewMapControl({
			anchor : BMAP_ANCHOR_BOTTOM_RIGHT,
			isOpen : false
		});
		map.addControl(overviewControl);
	}
	var map;
	mapchange("a");
	//	initMap();
</script>
</html>