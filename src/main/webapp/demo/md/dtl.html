<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<title>雅戈尔门店</title>
<script type="text/javascript"
	src="../../public/jquery/jquery-3.1.1.min.js"></script>
<link href="../../public/H-ui/lib/Hui-iconfont/1.0.8/iconfont.css"
	rel="stylesheet" type="text/css"></link>
<!-- 百度地图api -->
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=I1iruTOiEMidZAWfs9QEzUbuKHLmeWAO"></script>
<!-- mobileselect -->
<link href="../../public/mobileselect/css/mobileSelect.css"
	rel="stylesheet" type="text/css"></link>
<script type="text/javascript"
	src="../../public/mobileselect/js/mobileSelect.js"></script>

<script type="text/javascript" src="../../public/ajaxpost.js"></script>
</head>
<style type="text/css">
body {
	margin: 0px;
}
 

.img_celebrity_avatar {
	margin-top: 35px;
	margin-left: 5px;
	width: 40px;
	height: 40px;
	vertical-align: middle;
	float: left;
	width: 40px;
	width: 40px;
}

.div_celebrity_row {
	width: 98%;
	height: 105px;
	margin-left: auto;
	margin-right: auto;
	padding-top: 10px;
	padding-bottom: 10px;
	/* 	background: #eee; */
	border-bottom: 2px dashed #eee;
	/* box-shadow: 5px 5px 5px #888888; */
}

.div_celebrity_list {
	text-align: center;
	margin-left: auto;
	margin-right: auto;
	width: 100%;
	height: 300px;
	overflow-y: scroll;
	margin-right: auto;
	/* 	padding: 4px; */
	/* 	border: 2px dashed #aaa; */
}

.ul_celebrity_info {
	margin: 0;
	padding: 0;
	border: 1px solid red;
	list-style: none;
}

.div_celebrity_info {
	float: left;
	width: 200px;
	margin-top: 25px;
	margin-left: 25px;
	border: 1px solid red;
}

.ct {
	
	color: #C0C0C0;
	margin-top: 6px;
	padding-left: 15px;
	text-align: left;
	padding-left: 15px;
}

.ct thead tr {
	font-weight: bold;
	color: black;
	font-weight: bold;
}

.ct thead tr th {
	padding-left: 10px;
	padding-top:0px;
	padding-bottom:0px;
}
.ct tbody tr td {
	font-size:14px;
	padding-top:0px;
	padding-bottom:0px;
	
}
.ct tbody tr td:first-child {
	width: 10px;
}

.ct tbody tr:first-child {
	color: #0000FF;
}

.ct tbody tr:last-child {
	color: #0000FF;
}

#scrollView {
	width: 320px;
	height: 300px;
	/*上下边距是为了演示当滚动到顶部或底部时，继续滚动鼠标滚轮会滚动整个页面*/
	margin: 100px 0;
	display: flex;
}

#scrollContent {
	width: 300px;
	height: 300px;
	padding-left: 8px;
	background-color: antiquewhite;
	/*隐藏超出滚动内容区域的元素*/
	overflow: hidden;
}

#scrollTrack {
	width: 20px;
	height: 300px;
	background-color: cadetblue;
	display: flex;
	/*竖着排列滚动条区域内的上下按钮、滑块等元素*/
	flex-direction: column;
}

#btnUp, #btnDown {
	height: 20px;
	background-color: brown;
}

#scrollBar {
	height: 50px;
	background-color: darkblue;
}

#trackDown {
	/*让大幅度向下滚动点击区域占据排列完其他元素后剩下的所有区域*/
	flex-grow: 1;
}

/*当拖动滑块时，给body元素加上该类，防止鼠标的拖动导致网页内容的选择操作*/
.unselectable {
	/*当前版本的火狐（53）和Edge（15）不支持user-select标准属性，需要使用浏览器厂商前缀*/
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.headertab {
	background-color: #ccc;
	width: 100%;
	height: 45px;
	text-align: center;
	background-color: #ccc;
}

.headertab tr td:first-child {
	text-align: left;
	padding-left: 15px;
}
</style>

<body>
	<!-- 头部信息 -->
	<table class="headertab">
		<tr>
			<td style="width: 25%;font-size:14px;" id="trigger4"><i
				class="Hui-iconfont Hui-iconfont-arrow2-bottom"
				style="margin-right: 3px;"></i>宁波市</td>
			<td id="title" style="width: 50%"></td>
			<td style="width: 25%"></td>
		</tr>
	</table>
	<!--百度地图容器-->
	<div
		style="width: 100%; height: 300px; border: #ccc solid 1px; font-size: 12px"
		id="map"></div>

	<div class="div_celebrity_list" id="ctlist"></div>

</body>

<script type="text/javascript">
	var h = document.documentElement.clientHeight || document.body.clientHeight;
	console.log("高度" + h);

 
	$("#ctlist").height(h - 345);
     var provincedata = [{"id":"11","value":"浙江省","childs":[{"id":"93","value":"金华市"},{"id":"95","value":"舟山市"},{"id":"96","value":"台州市"},{"id":"90","value":"嘉兴市"},{"id":"97","value":"丽水市"},{"id":"94","value":"衢州市"},{"id":"89","value":"温州市"},{"id":"88","value":"宁波市"},{"id":"87","value":"杭州市"},{"id":"92","value":"绍兴市"},{"id":"91","value":"湖州市"}]},{"id":"25","value":"云南省","childs":[{"id":"265","value":"昆明市"},{"id":"266","value":"曲靖市"},{"id":"273","value":"楚雄彝族自治州"},{"id":"267","value":"玉溪市"}]},{"id":"12","value":"安徽省","childs":[{"id":"104","value":"铜陵市"},{"id":"99","value":"芜湖市"},{"id":"98","value":"合肥市"},{"id":"101","value":"淮南市"},{"id":"111","value":"六安市"},{"id":"114","value":"宣城市"},{"id":"112","value":"亳州市"},{"id":"108","value":"阜阳市"},{"id":"107","value":"滁州市"},{"id":"105","value":"安庆市"},{"id":"102","value":"马鞍山市"},{"id":"100","value":"蚌埠市"},{"id":"109","value":"宿州市"},{"id":"103","value":"淮北市"}]},{"id":"23","value":"四川省","childs":[{"id":"249","value":"达州市"},{"id":"247","value":"宜宾市"},{"id":"241","value":"广元市"},{"id":"245","value":"南充市"},{"id":"244","value":"乐山市"},{"id":"240","value":"绵阳市"},{"id":"238","value":"泸州市"},{"id":"236","value":"自贡市"},{"id":"243","value":"内江市"},{"id":"246","value":"眉山市"},{"id":"235","value":"成都市"}]},{"id":"4","value":"山西省","childs":[{"id":"20","value":"晋中市"},{"id":"15","value":"大同市"},{"id":"14","value":"太原市"},{"id":"16","value":"阳泉市"},{"id":"21","value":"运城市"},{"id":"17","value":"长治市"},{"id":"22","value":"忻州市"},{"id":"23","value":"临汾市"},{"id":"24","value":"吕梁市"}]},{"id":"16","value":"河南省","childs":[{"id":"153","value":"开封市"},{"id":"166","value":"信阳市"},{"id":"165","value":"商丘市"},{"id":"161","value":"许昌市"},{"id":"164","value":"南阳市"},{"id":"155","value":"平顶山市"},{"id":"156","value":"安阳市"},{"id":"162","value":"漯河市"},{"id":"152","value":"郑州市"},{"id":"154","value":"洛阳市"},{"id":"159","value":"焦作市"},{"id":"160","value":"濮阳市"},{"id":"163","value":"三门峡市"},{"id":"158","value":"新乡市"}]},{"id":"9","value":"上海市","childs":[{"id":"73","value":"上海市"}]},{"id":"28","value":"甘肃省","childs":[{"id":"304","value":"张掖市"},{"id":"306","value":"酒泉市"},{"id":"298","value":"兰州市"},{"id":"302","value":"天水市"}]},{"id":"15","value":"山东省","childs":[{"id":"143","value":"泰安市"},{"id":"142","value":"济宁市"},{"id":"137","value":"淄博市"},{"id":"151","value":"荷泽市"},{"id":"138","value":"枣庄市"},{"id":"144","value":"威海市"},{"id":"140","value":"烟台市"},{"id":"149","value":"聊城市"},{"id":"150","value":"滨州市"},{"id":"139","value":"东营市"},{"id":"148","value":"德州市"},{"id":"141","value":"潍坊市"},{"id":"145","value":"日照市"},{"id":"146","value":"莱芜市"},{"id":"136","value":"青岛市"},{"id":"135","value":"济南市"},{"id":"147","value":"临沂市"}]},{"id":"31","value":"新疆维吾尔自治区","childs":[{"id":"332","value":"阿克苏地区"},{"id":"326","value":"克拉玛依市"},{},{"id":"325","value":"乌鲁木齐市"},{"id":"331","value":"巴音郭楞蒙古自治州"}]},{"id":"10","value":"江苏省","childs":[{"id":"74","value":"南京市"},{"id":"78","value":"苏州市"},{"id":"81","value":"淮安市"},{"id":"82","value":"盐城市"},{"id":"84","value":"镇江市"},{"id":"80","value":"连云港市"},{"id":"79","value":"南通市"},{"id":"86","value":"宿迁市"},{"id":"75","value":"无锡市"},{"id":"83","value":"扬州市"},{"id":"76","value":"徐州市"}]},{"id":"5","value":"内蒙古自治区","childs":[{"id":"26","value":"包头市"},{"id":"25","value":"呼和浩特市"},{"id":"31","value":"呼伦贝尔市"}]},{"id":"7","value":"吉林省","childs":[{"id":"51","value":"长春市"},{"id":"52","value":"吉林市"},{"id":"53","value":"四平市"},{"id":"58","value":"白城市"},{"id":"59","value":"延边朝鲜族自治州"},{"id":"57","value":"松原市"}]},{"id":"24","value":"贵州省","childs":[{"id":"256","value":"贵阳市"},{"id":"258","value":"遵义市"}]},{"id":"13","value":"福建省","childs":[{"id":"116","value":"厦门市"},{"id":"115","value":"福州市"},{"id":"119","value":"泉州市"},{"id":"123","value":"宁德市"},{"id":"120","value":"漳州市"},{"id":"122","value":"龙岩市"}]},{"id":"17","value":"湖北省","childs":[{"id":"172","value":"宜昌市"},{"id":"178","value":"黄冈市"},{"id":"179","value":"咸宁市"},{"id":"170","value":"黄石市"},{"id":"175","value":"荆门市"},{"id":"171","value":"十堰市"},{"id":"176","value":"孝感市"},{"id":"174","value":"鄂州市"},{"id":"169","value":"武汉市"},{"id":"181","value":"恩施土家族苗族自治州"},{"id":"173","value":"襄樊市"}]},{"id":"22","value":"重庆市","childs":[{"id":"234","value":"重庆市"}]},{"id":"14","value":"江西省","childs":[{"id":"127","value":"九江市"},{"id":"132","value":"宜春市"},{"id":"130","value":"赣州市"},{"id":"129","value":"鹰潭市"},{"id":"134","value":"上饶市"},{"id":"125","value":"景德镇市"},{"id":"133","value":"抚州市"},{"id":"124","value":"南昌市"},{"id":"126","value":"萍乡市"}]},{"id":"30","value":"宁夏回族自治区","childs":[{"id":"321","value":"石嘴山市"},{"id":"320","value":"银川市"}]},{"id":"20","value":"广西壮族自治区","childs":[{"id":"218","value":"南宁市"},{"id":"219","value":"柳州市"},{"id":"226","value":"玉林市"}]},{"id":"8","value":"黑龙江省","childs":[{"id":"67","value":"佳木斯市"},{"id":"61","value":"齐齐哈尔市"},{"id":"60","value":"哈尔滨市"},{"id":"69","value":"牡丹江市"},{"id":"65","value":"大庆市"}]},{"id":"3","value":"河北省","childs":[{"id":"5","value":"秦皇岛市"},{"id":"12","value":"廊坊市"},{"id":"6","value":"邯郸市"},{"id":"4","value":"唐山市"},{"id":"9","value":"张家口市"},{"id":"10","value":"承德市"},{"id":"8","value":"保定市"},{"id":"11","value":"沧州市"},{"id":"7","value":"邢台市"},{"id":"13","value":"衡水市"},{"id":"3","value":"石家庄市"}]},{"id":"6","value":"辽宁省","childs":[{"id":"38","value":"大连市"},{"id":"43","value":"锦州市"},{"id":"47","value":"盘锦市"},{"id":"39","value":"鞍山市"},{"id":"48","value":"铁岭市"},{"id":"37","value":"沈阳市"},{"id":"44","value":"营口市"},{"id":"46","value":"辽阳市"}]},{"id":"2","value":"天津市","childs":[{"id":"2","value":"天津市"}]},{"id":"27","value":"陕西省","childs":[{"id":"291","value":"咸阳市"},{"id":"288","value":"西安市"},{"id":"296","value":"安康市"},{"id":"290","value":"宝鸡市"}]},{"id":"29","value":"青海省","childs":[{"id":"312","value":"西宁市"}]},{"id":"18","value":"湖南省","childs":[{"id":"189","value":"常德市"},{"id":"188","value":"岳阳市"},{"id":"186","value":"衡阳市"},{"id":"183","value":"长沙市"}]},{"id":"1","value":"北京市","childs":[{"id":"1","value":"北京市"}]},{"id":"19","value":"广东省","childs":[{"id":"207","value":"惠州市"},{"id":"201","value":"汕头市"},{"id":"216","value":"揭阳市"},{"id":"200","value":"珠海市"},{"id":"199","value":"深圳市"},{"id":"214","value":"中山市"},{"id":"202","value":"佛山市"},{"id":"213","value":"东莞市"},{"id":"197","value":"广州市"}]}];
	 var mobileSelect4 = new MobileSelect({
	        trigger: '#trigger4',
	        title: '省市',
	        wheels: [
	                 {data:provincedata}
	                ],
	        callback:function(indexArr, data){
	            console.log("indexArr",indexArr,"data",data);
	            getmdcitydata(data[1].id);
	            $("#trigger4").html("<i class=\"Hui-iconfont Hui-iconfont-arrow2-bottom\" style=\"margin-right: 3px;\"></i>"+data[1].value);
	        },
			 transitionEnd:function(indexArr, data){ 
	 		 }
	 });

	  
	 
	function getmdcitydata(city) {
		ajaxpost(
				"/api/md/md.do",
				{
					city : city
				},
				function(mddata) {
					console.log(mddata)
					var content = "";
					for (var i = 0; i < mddata.length; i++) {
						content = content
								+ " <div class='div_celebrity_row' onclick=\"changmd('"
								+ mddata[i].daim
								+ "')\">                                                                                 ";
						content = content
								+ " 			<div style=''>                                                                                         ";
						content = content
								+ " 				<img class='img_celebrity_avatar'                                                                  "    ;
				content=content+" 					src='http://pic.58pic.com/10/81/55/53bOOOPIC43.jpg' />                                         ";
						content = content
								+ " 			</div>                                                                                                 ";
						content = content
								+ " 			<table class='ct' >                                                                                     ";
						content = content
								+ " 				<thead>                                                                                            ";
						content = content
								+ " 					<tr> <th></th>                                                                                           ";
						content = content
								+ " 						<th>"
								+ mddata[i].mingc
								+ "</th>                                                                    ";
						content = content
								+ " 					</tr>                                                                                          ";
						content = content
								+ " 				</thead>                                                                                           ";
						content = content
								+ " 				<tbody>                                                                                            ";
						content = content
								+ " 					<tr >                                                                                           ";
						content = content
								+ " 						<td><i class='Hui-iconfont Hui-iconfont-phone'                                             "    ;
				content=content+" 							style='color: #ccc; margin-right: 3px;'></i></td><td> "
								+ mddata[i].dianh
								+ "</td>                         ";
						content = content
								+ " 					</tr>                                                                                          ";
						content = content
								+ " 					<tr>                                                                                           ";
						content = content
								+ " 						<td><i class='Hui-iconfont Hui-iconfont-weizhi'                                            "    ;
				content=content+" 							style='color: #ccc; margin-right: 3px;'></i></td><td> "
								+ mddata[i].diz + "</td>     ";
						content = content
								+ " 					</tr>                                                                                          ";
						content = content
								+ " 					<tr onclick=\"gomd('"+mddata[i].daim+"')\">                                                                                           ";
						content = content
								+ " 						<td onclick=\"gomd('"
								+ mddata[i].daim
								+ "')\"><i class='Hui-iconfont Hui-iconfont-fabu'                                              "    ;
				content=content+" 							style='color: #ccc; margin-right: 3px;'></i></td><td> 到这里去</td>                             ";
						content = content
								+ " 					</tr>                                                                                          ";
						content = content
								+ " 				</tbody>                                                                                           ";
						content = content
								+ " 			</table>                                                                                               ";
						content = content
								+ " </div>                                                                                                          ";

					}
					$("#ctlist").html(content);
					
					//获取第一张地图的数据
					if(mddata.length>0){
					 	mapchange(mddata[0]);
					}

				});
	}

	getmdcitydata(88);
	$("#seladdr").click(function() {
		console.log("选择地址");
	});
	
	 
	function changmd(daim){
			console.log(daim);
			ajaxpost(
				"/api/md/mddata.do",{
					id : daim
				},
				function(md) {
				if(md.length>0){
					 mapchange(md[0]);
				}
				
			});
	}

	function gomd(daim) {
		window.open("/mayormp/apps/weixin/md/loc.html?daim="+daim, "_blank");
	}

 

	function mapchange(md) {
		//修改title
		 $("#title").html(md.mingc);
 		 console.log("mapchange:",md);
		 var markers = [ {
				content :  md.diz,
				title : md.mingc,
				imageOffset : {
					width : 0,
					height : 1
				},
				position : {
					lat : md.weid,
					lng : md.jind
				}
			} ];

		createMap(markers[0].position.lat, markers[0].position.lng);//创建地图
		setMapEvent();//设置地图事件
		addMapControl();//向地图添加控件
		addMapOverlay(markers);//向地图添加覆盖物

	}

	$("#d").click(function() {
		window.open("/dt/wx/loc.html", "_blank");
	});

	$("#a").click(function() {

		mapchange("a")

	});
	$("#b").click(function() {
		mapchange("b")
	});










	//创建和初始化地图函数：
	function initMap() {
		createMap();//创建地图
		setMapEvent();//设置地图事件
		addMapControl();//向地图添加控件
		addMapOverlay();//向地图添加覆盖物
	}
	function createMap(lat, lng) {
		map = new BMap.Map("map");
		map.centerAndZoom(new BMap.Point(lng, lat), 16);
	}
	function setMapEvent() {
		map.enableScrollWheelZoom();
		map.enableKeyboard();
		map.enableDragging();
		map.enableDoubleClickZoom()
	}
	function addClickHandler(target, window) {
		target.addEventListener("click", function() {
			target.openInfoWindow(window);
		});
	}
	function addMapOverlay(markers) {

		for (var index = 0; index < markers.length; index++) {
			var point = new BMap.Point(markers[index].position.lng,
					markers[index].position.lat);
			var marker = new BMap.Marker(
					point,
					{
						icon : new BMap.Icon(
								"http://api.map.baidu.com/lbsapi/createmap/images/icon.png",
								new BMap.Size(20, 25), { 
									imageOffset : new BMap.Size(
											markers[index].imageOffset.width,
											markers[index].imageOffset.height)
								})
					});
			var label = new BMap.Label(markers[index].title, {
				offset : new BMap.Size(20,-10)
			});
			label.setStyle({
					color : "black",
					fontSize : "12px",
					height : "40px",
					lineHeight : "40px",
					paddingLeft:"10px",
					paddingRight:"10px",
					fontFamily:"微软雅黑",
					maxWidth:"none",
					borderStyle:"none"
				});
			var opts = {
				width : 200,
				title : markers[index].title,
				enableMessage : false
			};
			var infoWindow = new BMap.InfoWindow(markers[index].content, opts);
			marker.setLabel(label);
			addClickHandler(marker, infoWindow);
			map.addOverlay(marker);
		}
		;
	}
	//向地图添加控件
	function addMapControl() {
		var scaleControl = new BMap.ScaleControl({
			anchor : BMAP_ANCHOR_TOP_LEFT
		});
		scaleControl.setUnit(BMAP_UNIT_METRIC);
		map.addControl(scaleControl);
		var navControl = new BMap.NavigationControl({
			anchor : BMAP_ANCHOR_TOP_LEFT,
			type : 1
		});
		map.addControl(navControl);
		var overviewControl = new BMap.OverviewMapControl({
			anchor : BMAP_ANCHOR_BOTTOM_RIGHT,
			isOpen : false
		});
		map.addControl(overviewControl);
	}
	var map;
	
	//	initMap();
</script>
</html>